{
    "info": {
        "name": "Backend Data Governance Service API",
        "description": "Complete API collection for testing the Backend Data Governance Service with all 10 endpoints and comprehensive test scenarios",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "version": "1.0.0"
    },
    "auth": {
        "type": "noauth"
    },
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Set base URL",
                    "pm.globals.set('baseUrl', 'http://localhost:8080/api/v1');"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:8080/api/v1",
            "type": "string"
        },
        {
            "key": "userId",
            "value": "",
            "type": "string"
        },
        {
            "key": "postId",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "User Profile Management",
            "item": [
                {
                    "name": "FR1 - Create User Profile",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test('Response has user data', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('id');",
                                    "    pm.expect(jsonData).to.have.property('username');",
                                    "    pm.expect(jsonData).to.have.property('email');",
                                    "    ",
                                    "    // Store userId for subsequent requests",
                                    "    pm.globals.set('userId', jsonData.id);",
                                    "});",
                                    "",
                                    "pm.test('User has required fields', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.username).to.eql('johndoe');",
                                    "    pm.expect(jsonData.email).to.eql('john@example.com');",
                                    "    pm.expect(jsonData.roles).to.include('USER');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"johndoe\",\n  \"email\": \"john@example.com\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"roles\": [\"USER\"],\n  \"bio\": \"Software Developer and Tech Enthusiast\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users"
                            ]
                        }
                    }
                },
                {
                    "name": "FR2 - Get User Profile by ID",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Response contains user data', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('id');",
                                    "    pm.expect(jsonData).to.have.property('username');",
                                    "    pm.expect(jsonData).to.have.property('fullName');",
                                    "    pm.expect(jsonData).to.have.property('auditTrail');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/users/{{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{userId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "FR3 - Update User Profile",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('User profile updated', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.bio).to.eql('Updated: Senior Software Developer');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"bio\": \"Updated: Senior Software Developer\",\n  \"roles\": [\"USER\", \"MODERATOR\"]\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users/{{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{userId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "FR4 - Soft Delete User Profile",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 204', function () {",
                                    "    pm.response.to.have.status(204);",
                                    "});",
                                    "",
                                    "pm.test('Response body is empty', function () {",
                                    "    pm.expect(pm.response.text()).to.be.empty;",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/users/{{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{userId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "FR5 - Hard Delete User Profile (Grace Period Test)",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 403 (Grace period not elapsed)', function () {",
                                    "    pm.response.to.have.status(403);",
                                    "});",
                                    "",
                                    "pm.test('Error message mentions grace period', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.message).to.include('Grace period');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/users/{{userId}}/purge",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{userId}}",
                                "purge"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "User Preferences Management",
            "item": [
                {
                    "name": "Setup - Create User for Preferences",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "const jsonData = pm.response.json();",
                                    "pm.globals.set('prefsUserId', jsonData.id);"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"alice_smith\",\n  \"email\": \"alice@example.com\",\n  \"firstName\": \"Alice\",\n  \"lastName\": \"Smith\",\n  \"roles\": [\"USER\"]\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users"
                            ]
                        }
                    }
                },
                {
                    "name": "FR6 - Update User Preferences",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Preferences updated correctly', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.theme).to.eql('dark');",
                                    "    pm.expect(jsonData.language).to.eql('en');",
                                    "    pm.expect(jsonData.emailNotifications).to.be.false;",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"theme\": \"dark\",\n  \"language\": \"en\",\n  \"emailNotifications\": false,\n  \"pushNotifications\": true,\n  \"profileVisible\": true,\n  \"contentFilter\": \"moderate\",\n  \"customSettings\": {\n    \"dashboardLayout\": \"grid\",\n    \"autoSave\": true,\n    \"pageSize\": 20\n  }\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users/{{prefsUserId}}/preferences",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{prefsUserId}}",
                                "preferences"
                            ]
                        }
                    }
                },
                {
                    "name": "FR7 - Get User Preferences",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Preferences data is correct', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('userId');",
                                    "    pm.expect(jsonData).to.have.property('theme');",
                                    "    pm.expect(jsonData).to.have.property('customSettings');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/users/{{prefsUserId}}/preferences",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{prefsUserId}}",
                                "preferences"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "User Posts Management",
            "item": [
                {
                    "name": "Setup - Create User for Posts",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "const jsonData = pm.response.json();",
                                    "pm.globals.set('postsUserId', jsonData.id);"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"bob_wilson\",\n  \"email\": \"bob@example.com\",\n  \"firstName\": \"Bob\",\n  \"lastName\": \"Wilson\",\n  \"roles\": [\"USER\"]\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users"
                            ]
                        }
                    }
                },
                {
                    "name": "FR8 - Create Post",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test('Post created successfully', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('id');",
                                    "    pm.expect(jsonData.title).to.eql('My First Blog Post');",
                                    "    pm.expect(jsonData.tags).to.include('tutorial');",
                                    "    ",
                                    "    // Store postId for subsequent requests",
                                    "    pm.globals.set('postId', jsonData.id);",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"My First Blog Post\",\n  \"content\": \"This is a comprehensive guide to getting started with our data governance service. It covers all the essential features and best practices.\",\n  \"tags\": [\"tutorial\", \"getting-started\", \"data-governance\"],\n  \"isPublic\": true,\n  \"status\": \"PUBLISHED\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users/{{postsUserId}}/posts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{postsUserId}}",
                                "posts"
                            ]
                        }
                    }
                },
                {
                    "name": "FR8 - Create Another Post",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 201', function () {",
                                    "    pm.response.to.have.status(201);",
                                    "});",
                                    "",
                                    "pm.test('Second post created successfully', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.title).to.eql('Advanced Data Management');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Advanced Data Management\",\n  \"content\": \"Deep dive into advanced data management techniques including soft deletion, cascade operations, and audit trails.\",\n  \"tags\": [\"advanced\", \"data-management\", \"audit\"],\n  \"isPublic\": true,\n  \"status\": \"PUBLISHED\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users/{{postsUserId}}/posts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{postsUserId}}",
                                "posts"
                            ]
                        }
                    }
                },
                {
                    "name": "FR9 - Get User Posts",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Posts array returned', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.be.an('array');",
                                    "    pm.expect(jsonData.length).to.be.at.least(2);",
                                    "});",
                                    "",
                                    "pm.test('Posts contain required fields', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    if (jsonData.length > 0) {",
                                    "        const post = jsonData[0];",
                                    "        pm.expect(post).to.have.property('id');",
                                    "        pm.expect(post).to.have.property('title');",
                                    "        pm.expect(post).to.have.property('content');",
                                    "        pm.expect(post).to.have.property('tags');",
                                    "    }",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/users/{{postsUserId}}/posts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{postsUserId}}",
                                "posts"
                            ]
                        }
                    }
                },
                {
                    "name": "Get Single Post by ID",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Post data is correct', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('id');",
                                    "    pm.expect(jsonData).to.have.property('title');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/posts/{{postId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "posts",
                                "{{postId}}"
                            ]
                        }
                    }
                },
                {
                    "name": "FR10 - Soft Delete Post",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 204', function () {",
                                    "    pm.response.to.have.status(204);",
                                    "});",
                                    "",
                                    "pm.test('Response body is empty', function () {",
                                    "    pm.expect(pm.response.text()).to.be.empty;",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "DELETE",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/posts/{{postId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "posts",
                                "{{postId}}"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Error Scenarios & Validation Tests",
            "item": [
                {
                    "name": "Validation - Create User with Missing Fields",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 400', function () {",
                                    "    pm.response.to.have.status(400);",
                                    "});",
                                    "",
                                    "pm.test('Validation errors returned', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData).to.have.property('validationErrors');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"test\",\n  \"email\": \"invalid-email\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users"
                            ]
                        }
                    }
                },
                {
                    "name": "Conflict - Create User with Duplicate Username",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 409', function () {",
                                    "    pm.response.to.have.status(409);",
                                    "});",
                                    "",
                                    "pm.test('Conflict message returned', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.message).to.include('already exists');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"username\": \"bob_wilson\",\n  \"email\": \"bob2@example.com\",\n  \"firstName\": \"Bob\",\n  \"lastName\": \"Wilson\",\n  \"roles\": [\"USER\"]\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users"
                            ]
                        }
                    }
                },
                {
                    "name": "Not Found - Get Non-existent User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 404', function () {",
                                    "    pm.response.to.have.status(404);",
                                    "});",
                                    "",
                                    "pm.test('Not found message returned', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.message).to.include('not found');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/users/nonexistent-user-id",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "nonexistent-user-id"
                            ]
                        }
                    }
                },
                {
                    "name": "Business Rule - Create Post for Inactive User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 403', function () {",
                                    "    pm.response.to.have.status(403);",
                                    "});",
                                    "",
                                    "pm.test('Business rule violation message', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.message).to.include('inactive');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n  \"title\": \"Test Post\",\n  \"content\": \"This should fail for inactive user\",\n  \"isPublic\": true\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/users/{{userId}}/posts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "users",
                                "{{userId}}",
                                "posts"
                            ]
                        }
                    }
                }
            ]
        },
        {
            "name": "Health & Monitoring",
            "item": [
                {
                    "name": "Health Check",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "pm.test('Status code is 200', function () {",
                                    "    pm.response.to.have.status(200);",
                                    "});",
                                    "",
                                    "pm.test('Health status is UP', function () {",
                                    "    const jsonData = pm.response.json();",
                                    "    pm.expect(jsonData.status).to.eql('UP');",
                                    "});"
                                ]
                            }
                        }
                    ],
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/actuator/health",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "actuator",
                                "health"
                            ]
                        }
                    }
                },
                {
                    "name": "API Documentation",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api-docs",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api-docs"
                            ]
                        }
                    }
                }
            ]
        }
    ]
}